<div class="container mt-4">
  <div class="row">
    <div class="col-12">
      <h2>Job Opportunities</h2>
      <p class="text-muted">Discover exciting career opportunities from top companies</p>
    </div>
  </div>

  <!-- Search and Filter Section -->
  <div class="row mb-4">
    <div class="col-md-4">
      <div class="input-group">
        <input
          type="text"
          class="form-control"
          placeholder="Search jobs..."
          [(ngModel)]="searchTerm"
          (keyup.enter)="onSearch()">
        <button class="btn btn-outline-secondary" type="button" (click)="onSearch()">
          <i class="fas fa-search"></i>
        </button>
      </div>
    </div>
    <div class="col-md-4">
      <select
        class="form-select"
        [(ngModel)]="selectedJobType"
        (change)="filterByJobType(selectedJobType)">
        <option value="All">All Job Types</option>
        <option value="Full-time">Full-time</option>
        <option value="Part-time">Part-time</option>
        <option value="Internship">Internship</option>
      </select>
    </div>
    <div class="col-md-4">
      <select
        class="form-select"
        [(ngModel)]="selectedExperienceLevel"
        (change)="filterByExperienceLevel(selectedExperienceLevel)">
        <option value="All">All Experience Levels</option>
        <option value="Entry">Entry Level</option>
        <option value="Mid">Mid Level</option>
        <option value="Senior">Senior Level</option>
      </select>
    </div>
  </div>

  <!-- Loading Spinner -->
  <div *ngIf="isLoading" class="row">
    <div class="col-12 text-center">
      <div class="spinner-border" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
    </div>
  </div>

  <!-- Job Cards -->
  <div class="row" *ngIf="!isLoading">
    <div class="col-md-6 mb-4" *ngFor="let job of filteredJobs">
      <div class="card h-100 job-card">
        <div class="card-body d-flex flex-column">
          <div class="d-flex justify-content-between align-items-start mb-2">
            <h5 class="card-title mb-0">{{job.title}}</h5>
            <span class="badge"
                  [class.bg-success]="job.jobType === 'Full-time'"
                  [class.bg-warning]="job.jobType === 'Part-time'"
                  [class.bg-info]="job.jobType === 'Internship'">
              {{job.jobType}}
            </span>
          </div>

          <p class="text-muted mb-2">
            <i class="fas fa-building"></i> {{job.companyName}}
          </p>

          <p class="card-text flex-grow-1">{{job.description | slice:0:150}}...</p>

          <div class="mb-3">
            <div class="row text-sm">
              <div class="col-6">
                <i class="fas fa-map-marker-alt"></i> {{job.location}}
              </div>
              <div class="col-6">
                <i class="fas fa-level-up-alt"></i> {{job.experienceLevel}} Level
              </div>
            </div>
          </div>

          <div class="mb-3">
            <div class="salary-info">
              <i class="fas fa-rupee-sign"></i>
              <strong>{{formatSalary(job.salaryMin, job.salaryMax)}}</strong>
              <small class="text-muted">per annum</small>
            </div>
          </div>

          <div class="mb-3">
            <strong>Skills Required:</strong>
            <div class="skills-container mt-1">
              <span class="skill-badge" *ngFor="let skill of job.skillsRequired.split(',')">
                {{skill.trim()}}
              </span>
            </div>
          </div>

          <div class="mb-3">
            <div class="d-flex justify-content-between align-items-center">
              <small class="text-muted">
                <i class="fas fa-users"></i> {{job.numberOfPositions}} positions
              </small>
              <small class="text-muted">
                <i class="fas fa-eye"></i> {{job.numberOfApplications}} applications
              </small>
            </div>
          </div>

          <div class="deadline-info mb-3" *ngIf="isDeadlineApproaching(job.applicationDeadline)">
            <small class="text-warning">
              <i class="fas fa-clock"></i>
              Deadline in {{getDaysUntilDeadline(job.applicationDeadline)}} days
            </small>
          </div>

          <div class="mt-auto d-flex gap-2">
            <button
              class="btn btn-outline-primary flex-fill"
              (click)="viewJobDetails(job.id)">
              View Details
            </button>
            <button
              class="btn btn-success flex-fill"
              (click)="applyForJob(job.id)">
              Apply Now
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- No Jobs Found -->
  <div class="row" *ngIf="!isLoading && filteredJobs.length === 0">
    <div class="col-12 text-center">
      <div class="no-jobs-container">
        <i class="fas fa-briefcase fa-3x text-muted mb-3"></i>
        <p class="text-muted">No job opportunities found matching your criteria.</p>
      </div>
    </div>
  </div>
</div>