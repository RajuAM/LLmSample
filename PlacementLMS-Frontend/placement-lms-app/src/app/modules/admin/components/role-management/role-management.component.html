<div class="role-management">
  <div class="header">
    <h2>Role Management</h2>
    <button class="btn btn-primary" (click)="toggleRoleForm()">
      <i class="fa fa-plus"></i>
      {{ showRoleForm ? 'Cancel' : 'Create New Role' }}
    </button>
  </div>

  <!-- Role Form -->
  <div class="role-form" *ngIf="showRoleForm">
    <form [formGroup]="roleForm" (ngSubmit)="onSubmit()">
      <div class="form-group">
        <label for="roleName">Role Name *</label>
        <input type="text" id="roleName" formControlName="name" class="form-control">
        <div *ngIf="roleForm.get('name')?.invalid && roleForm.get('name')?.touched" class="error">
          Role name is required and must be at least 2 characters
        </div>
      </div>

      <div class="form-group">
        <label for="roleDescription">Description *</label>
        <textarea id="roleDescription" formControlName="description" class="form-control" rows="3"></textarea>
        <div *ngIf="roleForm.get('description')?.invalid && roleForm.get('description')?.touched" class="error">
          Description is required and must be at least 10 characters
        </div>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn btn-success" [disabled]="roleForm.invalid">
          {{ isEditing ? 'Update Role' : 'Create Role' }}
        </button>
        <button type="button" class="btn btn-secondary" (click)="resetForm()">Cancel</button>
      </div>
    </form>
  </div>

  <!-- Roles Table -->
  <div class="roles-table-container">
    <table class="roles-table">
      <thead>
        <tr>
          <th>Role Name</th>
          <th>Description</th>
          <th>Users Count</th>
          <th>Status</th>
          <th>Created</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let role of roles">
          <td>
            <strong>{{ role.name }}</strong>
          </td>
          <td>{{ role.description }}</td>
          <td>
            <span class="count-badge">{{ role.userCount }}</span>
          </td>
          <td>
            <span class="status-badge" [class.active]="role.isActive">
              {{ role.isActive ? 'Active' : 'Inactive' }}
            </span>
          </td>
          <td>{{ role.createdAt | date:'shortDate' }}</td>
          <td>
            <button class="btn btn-sm btn-primary" (click)="editRole(role)">
              <i class="fa fa-edit"></i> Edit
            </button>
            <button class="btn btn-sm btn-danger" (click)="deleteRole(role.id)">
              <i class="fa fa-trash"></i> Delete
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Role Information -->
  <div class="role-info" *ngIf="roles.length > 0">
    <h3>Default Roles</h3>
    <div class="role-cards">
      <div class="role-card" *ngFor="let role of roles.slice(0, 3)">
        <div class="role-card-header">
          <h4>{{ role.name }}</h4>
          <span class="status-badge" [class.active]="role.isActive">
            {{ role.isActive ? 'Active' : 'Inactive' }}
          </span>
        </div>
        <p>{{ role.description }}</p>
        <div class="role-card-footer">
          <small>{{ role.userCount }} users</small>
          <small>Created: {{ role.createdAt | date:'shortDate' }}</small>
        </div>
      </div>
    </div>
  </div>
</div>